@using System.Security.Claims
@using ReviewEverything.Shared.Contracts.Responses
<AuthorizeView Policy="Admin">
    <Authorized>
        <MudDivider />
        <MudListItem Text="Панель управления">
            <NestedList>
                <MudListItem Href="./admin/category" OnClick="MainLayout.ChangeDrawerOpen">Категории</MudListItem>
            </NestedList>
        </MudListItem>
    </Authorized>
</AuthorizeView>
<MudDivider />
<AuthorizeView>
    <Authorized>
        <MudListItem Text="Аккаунт">
            <NestedList>
                <MudListItem Text="Моя страница" OnClick="MainLayout.ChangeDrawerOpen" Href="@($"./user/{context.User.Claims.First(claim => claim.Type == ClaimTypes.NameIdentifier).Value}")" />
                <MudListItem Text="Настройки" OnClick="MainLayout.ChangeDrawerOpen" />
            </NestedList>
        </MudListItem>
    </Authorized>
</AuthorizeView>
<MudDivider />

@code
{
    [CascadingParameter] private MainLayout MainLayout { get; set; } = default!;
}
