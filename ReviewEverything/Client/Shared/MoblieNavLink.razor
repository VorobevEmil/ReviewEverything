@using System.Security.Claims
@using ReviewEverything.Shared.Contracts.Responses
@inject IStringLocalizer<SharedResource> Localizer

<AuthorizeView Policy="Admin">
    <Authorized>
        <MudDivider />
        <MudListItem Text="@Localizer["Control Panel"]">
            <NestedList>
                <MudListItem Href="./admin/user-manager" OnClick="MainLayout.ChangeDrawerOpen">@Localizer["Users"]</MudListItem>
                <MudListItem Href="./admin/category" OnClick="MainLayout.ChangeDrawerOpen">@Localizer["Categories"]</MudListItem>
            </NestedList>
        </MudListItem>
    </Authorized>
</AuthorizeView>
<MudDivider />
<AuthorizeView>
    <Authorized>
        <MudListItem Text="@Localizer["Account"]">
            <NestedList>
                <MudListItem Text="@Localizer["My page"]" OnClick="MainLayout.ChangeDrawerOpen" Href="@($"./user/{context.User.Claims.First(claim => claim.Type == ClaimTypes.NameIdentifier).Value}")" />
                <MudListItem Text="@Localizer["Settings"]" OnClick="MainLayout.ChangeDrawerOpen" />
            </NestedList>
        </MudListItem>
    </Authorized>
</AuthorizeView>
<MudDivider />

@code
{
    [CascadingParameter] private MainLayout MainLayout { get; set; } = default!;
}
